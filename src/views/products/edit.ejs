<!DOCTYPE html>
<html lang="en">
    <%- include('./../partials/head') %> 
    <link rel="stylesheet" href="../../css/styles.css">
    <title>Editá tu Dona</title>
<body>
    <!--incluimos partials del header-->
    <%- include('./../partials/header') %>

    <main>
        <div class="container">
            <section>
                <div class="columns is-centered"><!--REVISAR-->
                    <div class="column is-6"><!--REVISAR-->
                        <h2 class= "title-h2">Editá tu producto</h2>
                        <form action="/products/<%= product.id_product %>?_method=PUT" method="POST" enctype="multipart/form-data">
                            <div class="field-div">
                                <label class="label-field register-h2" for="name">Nombre</label>
                                <div class="field-text">
                                    <input type="text" name="name" id="name" value="<%= product.name %>" required="required" minlength="5">
                                </div>
                                <% if (locals.errors && errors.name) { %>
                                    <div class="text-danger field-text">
                                        <%= errors.name.msg  %> 
                                    </div>
                                <% } %>
                               
                            </div>

                            <div class="field-div">
                                <label class="label-field register-h2" for="price">Precio</label>
                                <div class="field-text">
                                    <input type="text" name="price" id="price" required="required" value="<%= product.price %>">
                                </div>
                                <% if (locals.errors && errors.price) { %>
                                    <div class="text-danger field-text">
                                        <%= errors.price.msg  %> 
                                    </div>
                                <% } %>
                            </div>

                            <div class="field-div">
                                <label class="label-field register-h2" for="discount_value">Descuento</label>
                                <div class="field-text">
                                    <input type="text" name="discount_value" id="discoun_value" value="<%= product.discount_value %>">
                                </div>
                                <% if (locals.errors && errors.discount_value) { %>
                                    <div class="text-danger field-text">
                                        <%= errors.discount_value.msg  %> 
                                    </div>
                                <% } %>
                            </div>

                            <div class="field-div">
                                <label class="label-field register-h2" for="discount">Tiene descuento</label>
                                <div class="field-text">
                                    <input type="discount" name="discount" id="discount" required="required" value="<%= product.discount %>">
                                </div>
                                <% if (locals.errors && errors.discount) { %>
                                    <div class="text-danger field-text">
                                        <%= errors.discount.msg  %> 
                                    </div>
                                <% } %>
                            </div>

                            <div class="field-div">
                                <label class="label-field register-h2" for="image">Imagen de producto</label>
                                <div class="field-text">
                                    <input type="file" name="image" id="image">
                                </div>
                                <% if (locals.errors && errors.image) { %>
                                    <div class="text-danger field-text">
                                        <%= errors.image.msg  %> 
                                    </div>
                                <% } %>
                            </div>
                            <div class="field-div">
                                <label class="label-field register-h2" for="description">Descripción</label>
                                <div class="field-text">
                                    <input type="description" name="description" id="description" required="required" minlength="20" value="<%= product.description %>">
                                </div>
                                <% if (locals.errors && errors.description) { %>
                                    <div class="text-danger field-text">
                                        <%= errors.description.msg  %> 
                                    </div>
                                <% } %>
                            </div>
                            <div class='field-div'>
                                <label class="label-field register-h2" for="category">Categoría</label>
                                <select required name="id_category">
                                    <% categories.forEach(category => { %>
                                        <option value="<%= category.id_category %>" <%= product.id_category === category.id_category ? 'selected' : '' %>><%= category.name %></option>
                                    <% }) %>
                                </select>
                            </div>
                            <div class="field-div">
                                <div class="field-text">
                                    <button type="submit">Editar producto</button>
                                </div>
                            </div>
                        </form>
                        <div class="field-div">
                            <div class="field-text">
                                <form class="field-div" action="/products/<%= product.id_product %>?_method=delete" method="POST">
                                <button>Borrar producto</button>
                                </form> 
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>
</body>
</html>